var de=Object.defineProperty;var Z=n=>{throw TypeError(n)};var ce=(n,e,t)=>e in n?de(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var v=(n,e,t)=>ce(n,typeof e!="symbol"?e+"":e,t),$=(n,e,t)=>e.has(n)||Z("Cannot "+t);var i=(n,e,t)=>($(n,e,"read from private field"),t?t.call(n):e.get(n)),f=(n,e,t)=>e.has(n)?Z("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),a=(n,e,t,s)=>($(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),o=(n,e,t)=>($(n,e,"access private method"),t);var q=(n,e,t,s)=>({set _(l){a(n,e,l,t)},get _(){return i(n,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(l){if(l.ep)return;l.ep=!0;const r=t(l);fetch(l.href,r)}})();let ee="Human-Human";function X(){return ee}function _(n){ee=n}let Q=!1;function ue(){Q=!0}function te(){Q=!1}function K(){return Q}let B;function me(n){B=n}function V(n,e=null){if(!B){console.error("Game message element is not set!");return}B.innerHTML=n,B.style.display="block",e&&setTimeout(()=>{B.style.display="none"},e)}var O,y,A,w,T,ie,U;class fe{constructor(e,t,s){f(this,T);f(this,O);f(this,y);f(this,A);f(this,w);v(this,"cells");v(this,"gameMode");v(this,"ai");v(this,"winningMaster");a(this,y,""),this.cells=e.children,a(this,A,4),a(this,w,4),this.gameMode=X(),this.ai=null,this.winningMaster=t,a(this,O,s)}setAI(e){this.ai=e}setGameMode(){this.gameMode=X()}makeMove(e){let t=this.getNextMove();if(o(this,T,ie).call(this,t)===!0){alert(`${t} you cannot do this move`);return}this.cells[e].textContent===""&&(this.cells[e].textContent=t,this.setNextMove(),this.reduceMoves(t),this.alertWinner(),o(this,T,U).call(this,t))}changeMove(e,t){let s=this.getNextMove();this.cells[e].textContent===s&&this.cells[t].textContent===""&&this.checkPlayerCount(s)?(this.cells[e].textContent="",this.cells[t].textContent=s,this.setNextMove(),this.alertWinner(),o(this,T,U).call(this,s)):alert(`${s} you cannot do this move`)}reduceMoves(e){e==="X"?q(this,A)._--:q(this,w)._--}checkPlayerCount(e){return e==="X"?i(this,A)<3:i(this,w)<3}getNextMove(){return i(this,y)===""||i(this,y)==="O"?"X":"O"}setNextMove(){i(this,y)===""||i(this,y)==="O"?a(this,y,"X"):a(this,y,"O")}alertWinner(){let e=this.winningMaster.checkWinner();e!==null&&(te(),setTimeout(()=>{V("Game over! Winner: "+e),i(this,O).stopTheTimer()},100))}resetGame(){a(this,y,""),a(this,A,4),a(this,w,4),this.ai!==null&&(this.ai.aiMoveCount=0,this.ai.aiCellsArray=[])}}O=new WeakMap,y=new WeakMap,A=new WeakMap,w=new WeakMap,T=new WeakSet,ie=function(e){return e==="X"?i(this,A)===0:i(this,w)===0},U=function(e){this.gameMode==="Human-AI"&&e==="X"&&this.ai&&this.ai.move()};var h,m,C,I;class Me{constructor(e){f(this,h);f(this,m);f(this,C);f(this,I);a(this,h,6),a(this,m,5),this.handleMovement=this.handleMovement.bind(this),a(this,C,e),a(this,I,null)}setAI(e){a(this,I,e)}highlightBoard(){document.querySelectorAll(".cell").forEach(t=>t.classList.remove("highlight")),[i(this,h),i(this,h)+1,i(this,h)+2,i(this,h)+i(this,m),i(this,h)+i(this,m)+1,i(this,h)+i(this,m)+2,i(this,h)+2*i(this,m),i(this,h)+2*i(this,m)+1,i(this,h)+2*i(this,m)+2].forEach(t=>{let s=document.querySelector(`.cell[data-index="${t}"]`);s&&s.classList.add("highlight")})}handleMovement(e){if(!i(this,C).checkPlayerCount(i(this,C).getNextMove())){alert(`${i(this,C).getNextMove()} you cannot do this move`);return}switch(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&e.preventDefault(),e.key){case"ArrowUp":i(this,h)>=i(this,m)&&a(this,h,i(this,h)-i(this,m));break;case"ArrowDown":i(this,h)+2*i(this,m)+i(this,m)<25&&a(this,h,i(this,h)+i(this,m));break;case"ArrowLeft":i(this,h)%i(this,m)!==0&&a(this,h,i(this,h)-1);break;case"ArrowRight":(i(this,h)+2)%i(this,m)!==i(this,m)-1&&a(this,h,i(this,h)+1);break}this.highlightBoard(),i(this,C).gameMode==="Human-AI"&&i(this,C).getNextMove()==="X"&&i(this,I)&&i(this,I).move(),i(this,C).setNextMove(),i(this,C).alertWinner()}clearTheBoard(){a(this,h,6),this.highlightBoard();let e=document.getElementsByClassName("cell");Array.from(e).forEach(t=>{t.textContent=""})}}h=new WeakMap,m=new WeakMap,C=new WeakMap,I=new WeakMap;var p,D,b,M,ne,le,z,j,re;class se{constructor(e,t,s){f(this,M);v(this,"aiMoveCount");f(this,p);f(this,D);f(this,b);v(this,"aiCellsArray");a(this,p,e),a(this,D,t),this.aiCellsArray=[],a(this,b,s),this.aiMoveCount=0}move(){if(!K())return;const e=s=>{setTimeout(()=>{s(),i(this,p).alertWinner()},500)};if(this.aiMoveCount<4){e(()=>o(this,M,ne).call(this));return}const t=i(this,b).findWinningMove("O")||i(this,b).findWinningMove("X");e(t?()=>o(this,M,j).call(this):Math.random()<.5?()=>o(this,M,j).call(this):()=>o(this,M,re).call(this))}}p=new WeakMap,D=new WeakMap,b=new WeakMap,M=new WeakSet,ne=function(){if(this.aiMoveCount>=4){console.log("AI shold not do this move");return}let e=o(this,M,z).call(this);i(this,p).cells[e].textContent="O",i(this,p).setNextMove(),i(this,p).reduceMoves("O"),this.aiMoveCount++,this.aiCellsArray.push(e)},le=function(){let e=Math.floor(Math.random()*24);for(;i(this,p).cells[e].textContent!=="";)e=Math.floor(Math.random()*24);return e},z=function(){return i(this,b).findWinningMove("O")||i(this,b).findWinningMove("X")||o(this,M,le).call(this)},j=function(){if(this.aiCellsArray.length===0)return;let e=o(this,M,z).call(this),t=Math.floor(Math.random()*this.aiCellsArray.length),s=this.aiCellsArray[t];i(this,p).cells[s].textContent="",i(this,p).cells[e].textContent="O",this.aiCellsArray.splice(t,1),this.aiCellsArray.push(e),i(this,p).setNextMove()},re=function(){let e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],t=e[Math.floor(Math.random()*e.length)];i(this,D).handleMovement(new KeyboardEvent("keydown",{key:t}))};var N,u,G,F,J,ae,oe,he;class ge{constructor(e){f(this,u);f(this,N);a(this,N,e.children)}checkWinner(){return o(this,u,J).call(this,!1)||o(this,u,J).call(this,!0)||o(this,u,ae).call(this)||null}findWinningMove(e){let t=null;for(let s=0;s<3;s++)if(t=o(this,u,G).call(this,[s*3,s*3+1,s*3+2],e),t!==null)return t;for(let s=0;s<3;s++)if(t=o(this,u,G).call(this,[s,s+3,s+6],e),t!==null)return t;return t=o(this,u,G).call(this,[0,4,8],e),t!==null||(t=o(this,u,G).call(this,[2,4,6],e),t!==null)?t:null}}N=new WeakMap,u=new WeakSet,G=function(e,t){let s=o(this,u,he).call(this),l=i(this,N),r=0,c=null;for(let d of e){let g=s[d];l[g].textContent===t?r++:l[g].textContent===""&&(c=g)}return r===2&&c!==null?c:null},F=function(e){let t=o(this,u,oe).call(this);for(let s of e){let l=0,r=0;for(let c of s){let d=t[c].textContent;if(d==="X"?(l++,r=0):d==="O"?(r++,l=0):(l=0,r=0),l===3)return"X";if(r===3)return"O"}}return null},J=function(e){let t=[];for(let s=0;s<3;s++){let l=[];for(let r=0;r<3;r++)l.push(e?s*3+r:r*3+s);t.push(l)}return o(this,u,F).call(this,t)},ae=function(){return o(this,u,F).call(this,[[0,4,8],[2,4,6]])},oe=function(){return document.getElementsByClassName("highlight")},he=function(){let e=document.getElementsByClassName("highlight");return Array.from(e).map(s=>parseInt(s.dataset.index))};function pe(n,e){let t=document.createElement("div");t.classList.add("container","board");let s=new ge(t),l=new fe(t,s,e),r=new Me(l);if(n==="Human-AI"){let d=new se(l,r,s);r.setAI(d),l.setAI(d)}let c=null;for(let d=0;d<25;d++){let g=document.createElement("div");g.classList.add("cell"),g.dataset.index=d.toString(),g.addEventListener("click",()=>{if(!K()){alert("Please reset and start the game!");return}if(c===null)g.textContent===""?l.makeMove(d):(c=d,g.classList.add("selected"));else{let E=d;l.changeMove(c,E),document.querySelectorAll(".selected").forEach(x=>x.classList.remove("selected")),c=null}}),t.appendChild(g)}return document.body.appendChild(t),r.highlightBoard(),document.addEventListener("keydown",d=>{if(!K()){alert("Please reset and start the game!");return}r.handleMovement(d)}),{board:t,gameMaster:l,boardMaster:r}}function ve(n,e){n.resetGame(),e.clearTheBoard()}class ye{constructor(e){v(this,"sec");v(this,"intervalId");v(this,"initialSec");v(this,"timerDisplay",null);this.sec=e,this.intervalId=null,this.initialSec=e}startTheTimer(){if(this.timerDisplay=document.getElementById("timerDisplay"),!this.timerDisplay){console.error("Timer display element not found!");return}this.intervalId===null&&(this.intervalId=setInterval(()=>{if(this.sec<=0){this.stopTheTimer(),this.timerDisplay&&(this.timerDisplay.innerHTML="Time's up!"),V("Game over! Time's up!");return}this.timerDisplay&&(this.timerDisplay.innerHTML=`00:${this.sec<10?"0":""}${this.sec}`),this.sec--},1e3))}stopTheTimer(e=null){this.timerDisplay&&(this.timerDisplay.innerHTML="01:00"),this.intervalId!==null&&(clearInterval(this.intervalId),this.intervalId=null),e!==null&&(this.sec=this.initialSec)}}function Ce(){let n=document.createElement("h1");n.innerHTML="Tic Tac Two",document.body.appendChild(n);let e=document.createElement("div");e.classList.add("flex-container"),document.body.appendChild(e);let t=document.createElement("div");t.classList.add("game-message"),e.appendChild(t),me(t);let s=document.createElement("div");s.classList.add("button-wrapper"),e.appendChild(s);let l=document.createElement("div");l.classList.add("start-button-wrapper"),s.appendChild(l);let r=document.createElement("button");r.innerHTML="Reset game",r.classList.add("reset-game-button"),l.appendChild(r);let c=document.createElement("button");c.innerHTML="Start game",c.classList.add("start-game-button"),l.appendChild(c);let d=document.createElement("div");d.classList.add("mode-button-wrapper"),s.appendChild(d);let g=document.createElement("label");g.innerHTML="Select game mode: ",d.appendChild(g);let E=document.createElement("div");E.classList.add("mode-button-container"),d.appendChild(E);let x=document.createElement("button");x.innerHTML="Human-Human",x.classList.add("game-mode-button","selected"),E.appendChild(x);let H=document.createElement("button");H.innerHTML="Human-AI",H.classList.add("game-mode-button"),E.appendChild(H),x.addEventListener("click",()=>{_("Human-Human"),x.classList.add("selected"),H.classList.remove("selected")}),H.addEventListener("click",()=>{_("Human-AI"),H.classList.add("selected"),x.classList.remove("selected")});let S=new ye(59),W=document.createElement("div");W.id="timerDisplay",W.innerHTML="01:00",W.classList.add("timer-style"),s.appendChild(W);let P,L=null,k=null,R=!1;c.addEventListener("click",()=>{if(!P)({board:P,gameMaster:L,boardMaster:k}=pe(X(),S)),e.appendChild(P);else if(!R){alert("Please press 'Reset game' before starting!");return}if(L&&k&&(L.setGameMode(),X()==="Human-AI"&&L.ai===null)){let Y=new se(L,k,L.winningMaster);k.setAI(Y),L.setAI(Y)}ue(),S.startTheTimer(),R=!1,V("Game starts",2e3)}),r.addEventListener("click",()=>{!L||!k||(te(),S.stopTheTimer(30),ve(L,k),R=!0,t.style.display="none")})}document.addEventListener("DOMContentLoaded",()=>{Ce()});
